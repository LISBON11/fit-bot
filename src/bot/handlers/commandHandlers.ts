import type { CustomContext } from '../types.js';

/**
 * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
 * @param ctx –ö–æ–Ω—Ç–µ–∫—Å—Ç –±–æ—Ç–∞
 */
export async function handleStart(ctx: CustomContext): Promise<void> {
  const name = ctx.user?.displayName || ctx.from?.first_name || '–°–ø–æ—Ä—Ç—Å–º–µ–Ω';
  await ctx.reply(
    `–ü—Ä–∏–≤–µ—Ç, ${name}! üëã\n\n–Ø FitBot ‚Äî —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∏—Ç–Ω–µ—Å-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.\n–û—Ç–ø—Ä–∞–≤—å –º–Ω–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ —Ç–µ–∫—Å—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ç–≤–æ–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, –∏ —è —Å–æ—Ö—Ä–∞–Ω—é –µ—ë.\n\n–ò—Å–ø–æ–ª—å–∑—É–π /help —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.`,
  );
}

/**
 * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help. –í—ã–≤–æ–¥–∏—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞.
 * @param ctx –ö–æ–Ω—Ç–µ–∫—Å—Ç –±–æ—Ç–∞
 */
export async function handleHelp(ctx: CustomContext): Promise<void> {
  const helpText = `
üèãÔ∏è‚Äç‚ôÇÔ∏è **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FitBot:**

–í—ã –º–æ–∂–µ—Ç–µ –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≥–æ–ª–æ—Å–æ–º –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–º –≤ —Å–≤–æ–±–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.
–ù–∞–ø—Ä–∏–º–µ—Ä:
üó£ _"–°–µ–≥–æ–¥–Ω—è –∫–∞—á–∞–ª–∞ –Ω–æ–≥–∏ –¥–æ–º–∞. –ü—Ä–∏—Å–µ–¥ 4 –ø–æ 12 —Å 40 –∫–≥, –ø–æ—Ç–æ–º —Ä—É–º—ã–Ω—Å–∫–∞—è 3 –ø–æ 10 —Å 35 –∫–≥, —Ç—è–Ω—É–ª–æ –ø—Ä–∞–≤–æ–µ –±–µ–¥—Ä–æ. –í –∫–æ–Ω—Ü–µ —è–≥–æ–¥–∏—á–Ω—ã–π –º–æ—Å—Ç 4 –Ω–∞ 15 —Å –ø–æ–ª—Ç–∏–Ω–Ω–∏–∫–æ–º."_

–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/start ‚Äî –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
/help ‚Äî –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
/cancel ‚Äî –û—Ç–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π –≤–≤–æ–¥/–¥–∏–∞–ª–æ–≥
/edit ‚Äî –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –∑–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –¥–∞—Ç—É (–Ω–∞–ø—Ä. /edit 19 —Ñ–µ–≤—Ä–∞–ª—è)
`;
  await ctx.reply(helpText, { parse_mode: 'Markdown' });
}

/**
 * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /cancel. –ü—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –¥–∏–∞–ª–æ–≥ –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
 * @param ctx –ö–æ–Ω—Ç–µ–∫—Å—Ç –±–æ—Ç–∞
 */
export async function handleCancel(ctx: CustomContext): Promise<void> {
  // –û—á–∏—â–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ conversation state
  // await ctx.conversation.exit('some_conversation_name'); // TODO: Pass conversation name
  ctx.session = {}; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–µ—Å—Å–∏—é –¥–ª—è –æ—Ç–º–µ–Ω—ã
  await ctx.reply('–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ. –ñ–¥—É –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥! ‚è≥');
}
